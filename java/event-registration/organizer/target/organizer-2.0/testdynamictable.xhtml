<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>testdynamictable</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    </h:head>
    <h:body>
        <h:form id="formtestdynamictable">
            <p:focus id="focus" context="panel"/>
            <p:growl id="messages" showSummary="true"/>
            <p:panel id="panel" header="Header">
                <p:panelGrid id="panelgrid">

                    <p:row>
                        <p:column colspan="5">
                            <p:dataTable id="datatable" var="t" value="#{event.event.tickets}"
                                         style="width: 100%" editable="false">
                                <p:column headerText="Name">
                                    <p:outputLabel id="labelName" value="#{t.name}"/>
                                </p:column>

                                <p:column headerText="Quantity">
                                    <p:outputLabel id="labelQuantity" value="#{t.quantity}"/>
                                </p:column>

                                <p:column>
                                    <p:commandButton id="buttonRemove" value="Remove"
                                                     actionListener="#{event.removeTicket(t)}" ajax="true"
                                                     update="datatable"/>
                                </p:column>

                            </p:dataTable>
                        </p:column>
                    </p:row>

                    <p:row>
                        <p:column><p:outputLabel id="labelName" for="inputName" value="Name"/></p:column>
                        <p:column><p:inputText id="inputName" value="#{event.ticketName}"/></p:column>
                        <p:column><p:outputLabel id="labelQuantity" for="inputQuantity" value="Quantity"/></p:column>
                        <p:column><p:spinner id="inputQuantity" value="#{event.ticketQuantity}"
                                             min="1" stepFactor="1"/></p:column>
                        <p:column><p:commandButton id="buttonAdd" value="Add" actionListener="#{event.addTicket}"
                                                   update="datatable inputName inputQuantity"/></p:column>
                    </p:row>
                </p:panelGrid>
            </p:panel>
        </h:form>
    </h:body>
</html>